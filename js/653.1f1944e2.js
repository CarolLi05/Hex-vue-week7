"use strict";(self["webpackChunkvue_week7"]=self["webpackChunkvue_week7"]||[]).push([[653],{1530:function(t,s,a){function i(t){return{all:t=t||new Map,on:function(s,a){var i=t.get(s);i?i.push(a):t.set(s,[a])},off:function(s,a){var i=t.get(s);i&&(a?i.splice(i.indexOf(a)>>>0,1):t.set(s,[]))},emit:function(s,a){var i=t.get(s);i&&i.slice().map((function(t){t(a)})),(i=t.get("*"))&&i.slice().map((function(t){t(s,a)}))}}}a.d(s,{Z:function(){return e}});const c=i();var e=c},7653:function(t,s,a){a.r(s),a.d(s,{default:function(){return y}});var i=a(6252),c=a(3577),e=a(9963);const o={class:"container"},n=(0,i._)("h2",null,"Products List",-1),r={class:"row row-cols-1 row-cols-lg-4 g-3"},d={class:"card h-100"},l=["src"],u={class:"card-body"},p={class:"card-title"},h={class:"card-text"},g=(0,i.Uk)("More"),f=["onClick","disabled"],m={class:"fas fa-spinner fa-pulse"},v=(0,i.Uk)(" 加入購物車 ");function w(t,s,a,w,_,k){const b=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",o,[n,(0,i._)("div",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(_.products,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col",key:t.id},[(0,i._)("div",d,[(0,i._)("img",{src:t.imageUrl,class:"card-img-top",alt:"..."},null,8,l),(0,i._)("div",u,[(0,i._)("h5",p,(0,c.zw)(t.title),1),(0,i._)("p",h,(0,c.zw)(t.description),1),(0,i.Wm)(b,{to:`/product/${t.id}`,class:"btn btn-primary"},{default:(0,i.w5)((()=>[g])),_:2},1032,["to"]),(0,i._)("button",{type:"button",class:"btn btn-dark ms-2",onClick:s=>k.addToCart(t.id),disabled:_.isLoadingItem===t.id},[(0,i.wy)((0,i._)("i",m,null,512),[[e.F8,_.isLoadingItem===t.id]]),v],8,f)])])])))),128))])])}var _=a(1530),k={data(){return{products:[],cartData:{carts:[]},isLoadingItem:""}},methods:{getProducts(){this.$http("https://vue3-course-api.hexschool.io/v2/api/carolli_apexc/products/all").then((t=>{this.products=t.data.products}))},addToCart(t,s=1){const a={product_id:t,qty:s};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/carolli_apexc/cart",{data:a}).then((t=>{console.log(t),alert("已成功加入購物車"),this.isLoadingItem="",_.Z.emit("get-cart")})).catch((t=>{console.dir(t),alert(t.data.message)}))}},mounted(){this.getProducts()}},b=a(3744);const x=(0,b.Z)(k,[["render",w]]);var y=x}}]);
//# sourceMappingURL=653.1f1944e2.js.map