"use strict";(self["webpackChunkvue_week7"]=self["webpackChunkvue_week7"]||[]).push([[130],{1530:function(t,e,a){function i(t){return{all:t=t||new Map,on:function(e,a){var i=t.get(e);i?i.push(a):t.set(e,[a])},off:function(e,a){var i=t.get(e);i&&(a?i.splice(i.indexOf(a)>>>0,1):t.set(e,[]))},emit:function(e,a){var i=t.get(e);i&&i.slice().map((function(t){t(a)})),(i=t.get("*"))&&i.slice().map((function(t){t(e,a)}))}}}a.d(e,{Z:function(){return o}});const n=i();var o=n},9130:function(t,e,a){a.r(e),a.d(e,{default:function(){return L}});var i=a(6252),n=a(3577),o=a(9963);const c={class:"container"},l=(0,i._)("h2",null,"Cart",-1),s={class:"table align-middle"},r=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null,"圖片"),(0,i._)("th",null,"商品名稱"),(0,i._)("th",null,"價格"),(0,i._)("th")])],-1),d={style:{width:"200px"}},u={key:0,class:"h5"},p={key:1},g={class:"h6"},h={class:"h5"},_={class:"btn-group btn-group-sm"},f=["onClick","disabled"],b={class:"fas fa-spinner fa-pulse"},v=(0,i.Uk)(" 查看更多 "),m=["onClick","disabled"],k={class:"fas fa-spinner fa-pulse"},w=(0,i.Uk)(" 加到購物車 ");function y(t,e,a,y,C,D){return(0,i.wg)(),(0,i.iD)("div",c,[l,(0,i._)("table",s,[r,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(C.cartData.carts,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",d,[(0,i._)("div",{style:(0,n.j5)([{backgroundImage:`url(${e.product.imageUrl})`},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),(0,i._)("td",null,(0,n.zw)(e.product.title),1),(0,i._)("td",null,[e.price===e.product.origin_price?((0,i.wg)(),(0,i.iD)("div",u,(0,n.zw)(e.product.price)+" 元 ",1)):((0,i.wg)(),(0,i.iD)("div",p,[(0,i._)("del",g,"原價 "+(0,n.zw)(e.product.origin_price)+" 元",1),(0,i._)("div",h,"現在只要 "+(0,n.zw)(e.product.price)+" 元",1)]))]),(0,i._)("td",null,[(0,i._)("div",_,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:a=>t.openProductModal(e.product_id),disabled:C.isLoadingItem===e.product_id},[(0,i.wy)((0,i._)("i",b,null,512),[[o.F8,C.isLoadingItem===e.product_id]]),v],8,f),(0,i._)("button",{type:"button",class:"btn btn-outline-danger",onClick:t=>D.addToCart(e.product_id),disabled:C.isLoadingItem===e.product_id},[(0,i.wy)((0,i._)("i",k,null,512),[[o.F8,C.isLoadingItem===e.product_id]]),w],8,m)])])])))),128))])])])}var C=a(1530),D={data(){return{cartData:{carts:[]},products:[],isLoadingItem:""}},methods:{getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/carolli_apexc/cart").then((t=>{console.log(t),this.cartData=t.data.data})).catch((t=>{console.dir(t),alert(t.data.message)}))},addToCart(t,e=1){const a={product_id:t,qty:e};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/carolli_apexc/cart",{data:a}).then((t=>{console.log(t),alert("已成功加入購物車"),this.isLoadingItem="",C.Z.emit("get-cart")})).catch((t=>{console.dir(t),alert(t.data.message)}))}},mounted(){this.getCart()}},I=a(3744);const x=(0,I.Z)(D,[["render",y]]);var L=x}}]);
//# sourceMappingURL=130.8c06992c.js.map